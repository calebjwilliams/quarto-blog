<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jeannie Koshpasharin, Caleb Williams, Arya Shah">
<meta name="dcterms.date" content="2024-12-13">

<title>Recipe Recommendaton Web App – myblog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">myblog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Recipe Recommendaton Web App</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">code</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jeannie Koshpasharin, Caleb Williams, Arya Shah </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 13, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="project-description" class="level1">
<h1>Project Description</h1>
<p>The Recipe Recommendation Web App is designed to help users easily find recipes based on the ingredients they have at home and their specific nutritional goals. The app addresses two major challenges in meal planning: ingredient-based recipe discovery and nutrition tracking. The first feature allows users to input the ingredients they currently have in their kitchen or specify a type of meal (e.g., “chicken and rice”), and the app generates a list of recipes that can be made with those ingredients. This helps users minimize food waste by utilizing available ingredients. The second feature is focused on users’ nutritional goals. Users can set specific dietary parameters, such as maximum calorie count or minimum protein intake, and the app will suggest recipes that meet those criteria, ensuring users stay on track with their health goals.</p>
<p>The app’s user interface is designed to be intuitive and interactive, enabling users to easily input ingredients, dietary restrictions, and meal preferences. The app connects to a recipe database, which contains detailed information on each recipe, including nutritional data. Users can browse through a list of recipe recommendations that are ranked based on user ratings and relevance to their inputs. They can then select a recipe based on factors like taste preferences, nutritional fit, or ingredient availability. Once a recipe is chosen, users can click on a link to view the full recipe page, which includes step-by-step instructions, ingredient quantities, and nutritional breakdown.</p>
<p>The three main technical parts of our project were web scraping recipe and nutritional information from Allreipes.com using Scrapy, storage of scraped and cleaned data within an SQLite3 database, and implementation of a Dash web app to allow for user-friendly input and display of recommended recipes.</p>
<p>Our project can be found at the following GitHub repository: https://github.com/calebjwilliams/reciperecommendation.</p>
<p><img src="flow.png" class="img-fluid"></p>
</section>
<section id="web-scraping-with-scrapy" class="level1">
<h1>1. Web Scraping with Scrapy</h1>
<p>The first step in building the Recipe Recommendation Web App was collecting a comprehensive dataset of recipes. For this purpose, we utilized Scrapy. Scrapy allowed us to automate the process of collecting essential recipe information such as recipe titles, ingredients, preparation times, cooking times, serving sizes, nutritional facts, and user ratings. The scraper leveraged the Scrapy framework alongside Selenium to dynamically load and navigate pages, ensuring all desired data could be captured effectively, even from JavaScript-rendered content.</p>
<p>The scraper begins by traversing the recipe index page and extracting links to individual recipe categories. From there, it navigates through recipe listings within each category to reach individual recipe pages, where it extracts structured nutritional and ingredient data we needed using CSS selectors. This multi-layered approach ensures comprehensive data collection.</p>
<div id="80eeb476-66c8-458e-baae-84fd4f93fb87" class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scrapy</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scrapy_selenium <span class="im">import</span> SeleniumRequest</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AllRecipesSpider(scrapy.Spider):</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> <span class="st">'allrecipes'</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    allowed_domains <span class="op">=</span> [<span class="st">'allrecipes.com'</span>]</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    start_urls <span class="op">=</span> [<span class="st">'https://www.allrecipes.com/recipes-a-z-6735880'</span>]</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> start_requests(<span class="va">self</span>):</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> SeleniumRequest(</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>            url<span class="op">=</span><span class="va">self</span>.start_urls[<span class="dv">0</span>],</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>            callback<span class="op">=</span><span class="va">self</span>.parse_index</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> parse_index(<span class="va">self</span>, response):</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Select links for each type of recipe</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        initial_links <span class="op">=</span> response.css(<span class="st">'a.mntl-link-list__link::attr(href)'</span>).getall()</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        categories <span class="op">=</span> response.css(<span class="st">'a.mntl-link-list__link::text'</span>).getall()</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> link, category <span class="kw">in</span> <span class="bu">zip</span>(initial_links, categories):</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">yield</span> response.follow(link, callback<span class="op">=</span><span class="va">self</span>.parse_recipe_link, meta<span class="op">=</span>{<span class="st">'category'</span>: category.strip()})</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> parse_recipe_link(<span class="va">self</span>, response):</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extract details for individual recipe pages</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>        category <span class="op">=</span> response.meta.get(<span class="st">'category'</span>, <span class="st">'Unknown'</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>        recipe_links <span class="op">=</span> response.css(<span class="st">'a.comp.mntl-card-list-items::attr(href)'</span>).getall()</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> link <span class="kw">in</span> recipe_links:</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">'www.allrecipes.com/article/'</span> <span class="kw">not</span> <span class="kw">in</span> link <span class="kw">and</span> <span class="st">'www.allrecipes.com/gallery/'</span> <span class="kw">not</span> <span class="kw">in</span> link:</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>                <span class="cf">yield</span> response.follow(link, callback<span class="op">=</span><span class="va">self</span>.parse_recipe_page, meta<span class="op">=</span>{<span class="st">'category'</span>: category})</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> parse_recipe_page(<span class="va">self</span>, response):</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>        category <span class="op">=</span> response.meta.get(<span class="st">'category'</span>, <span class="st">'Unknown'</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>        title <span class="op">=</span> response.css(<span class="st">'h1.article-heading.text-headline-400::text'</span>).get(default<span class="op">=</span><span class="st">''</span>).strip()</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>        total_time <span class="op">=</span> response.css(<span class="st">'div.mm-recipes-details__item:contains("Total Time") div.mm-recipes-details__value::text'</span>).get()</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>        prep_time <span class="op">=</span> response.css(<span class="st">'div.mm-recipes-details__item:contains("Prep Time") div.mm-recipes-details__value::text'</span>).get()</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>        cook_time <span class="op">=</span> response.css(<span class="st">'div.mm-recipes-details__item:contains("Cook Time") div.mm-recipes-details__value::text'</span>).get()</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>        ingredients <span class="op">=</span> []</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> ingredient <span class="kw">in</span> response.css(<span class="st">'li.mm-recipes-structured-ingredients__list-item'</span>):</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>            quantity <span class="op">=</span> ingredient.css(<span class="st">'span[data-ingredient-quantity="true"]::text'</span>).get(default<span class="op">=</span><span class="st">''</span>).strip()</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>            unit <span class="op">=</span> ingredient.css(<span class="st">'span[data-ingredient-unit="true"]::text'</span>).get(default<span class="op">=</span><span class="st">''</span>).strip()</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>            name <span class="op">=</span> ingredient.css(<span class="st">'span[data-ingredient-name="true"]::text'</span>).get(default<span class="op">=</span><span class="st">''</span>).strip()</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>            full_ingredient <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>quantity<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>unit<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">"</span>.strip()</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>            ingredients.append(full_ingredient)</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>        ingredients <span class="op">=</span> <span class="st">', '</span>.join(ingredients) <span class="cf">if</span> ingredients <span class="cf">else</span> <span class="st">"No ingredients listed"</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>        nutrition_facts <span class="op">=</span> {}</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>        nutrition_rows <span class="op">=</span> response.css(<span class="st">'tbody.mm-recipes-nutrition-facts-summary__table-body tr.mm-recipes-nutrition-facts-summary__table-row'</span>)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> row <span class="kw">in</span> nutrition_rows:</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>            nutrient_value <span class="op">=</span> row.css(<span class="st">'td.mm-recipes-nutrition-facts-summary__table-cell.text-body-100-prominent::text'</span>).get(default<span class="op">=</span><span class="st">''</span>).strip()</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>            nutrient_name <span class="op">=</span> row.css(<span class="st">'td.mm-recipes-nutrition-facts-summary__table-cell.text-body-100::text'</span>).get(default<span class="op">=</span><span class="st">''</span>).strip()</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> nutrient_value <span class="kw">and</span> nutrient_name:</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>                nutrition_facts[nutrient_name] <span class="op">=</span> nutrient_value</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>        serving_info <span class="op">=</span> response.css(<span class="st">'p.mm-recipes-serving-size-adjuster__meta::text'</span>).get()</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>        rating <span class="op">=</span> response.css(<span class="st">'div.mm-recipes-review-bar__rating::text'</span>).get(default<span class="op">=</span><span class="st">'No rating available'</span>).strip()</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>        recipe_link <span class="op">=</span> response.url</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> {</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>            <span class="st">'category'</span>: category,</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>            <span class="st">'title'</span>: title,</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>            <span class="st">'total_time'</span>: total_time,</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>            <span class="st">'prep_time'</span>: prep_time,</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>            <span class="st">'cook_time'</span>: cook_time,</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>            <span class="st">'ingredients'</span>: ingredients,</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>            <span class="st">'serving_info'</span>: serving_info,</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>            <span class="st">'nutrition_facts'</span>: nutrition_facts,  <span class="co"># Added nutrition facts to the output</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>            <span class="st">'rating'</span>: rating,</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>            <span class="st">'recipe_link'</span>: recipe_link</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>        }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here are the key data points extracted by the web scraper:</p>
<ul>
<li>Category: The category or type of recipe (this is what the spider started with. e.g., “Desserts,” “Main Dishes”).</li>
<li>Title: The name of the recipe.</li>
<li>Total Time: The total estimated time required to prepare the recipe.</li>
<li>Prep Time: The time required to prepare the ingredients.</li>
<li>Cook Time: The time required for cooking the recipe.</li>
<li>Ingredients: A list of all ingredients with their quantities, units, and names.</li>
<li>Serving Info: Information about the number of servings the recipe yields.</li>
<li>Nutrition Facts: Detailed nutritional information, including calories, fats, carbs, and proteins.</li>
<li>Rating: User rating of the recipe (if available).</li>
<li>Recipe Link: The URL of the recipe for additional details.</li>
</ul>
<p>Here’s an example of the pages the scaper naviages through to collect the recipe information. 1. Starts on <code>https://www.allrecipes.com/recipes-a-z-6735880</code> 2. Navigates to each individual recipe link 3. On each individual recipe page, collects recipe information</p>
<p><img src="web1.png" class="img-fluid"></p>
<p><img src="web2.png" class="img-fluid"></p>
<p><img src="web3.png" class="img-fluid"></p>
<section id="a.-data-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="a.-data-cleaning">1a. Data Cleaning</h3>
<p>The raw dataset underwent several cleaning steps to ensure its quality and usability for the Recipe Recommendation System. Cleaning involved handling missing data, standardizing formats, and transforming fields for easier querying and filtering. Below are the steps involved:</p>
<ul>
<li><p>Removed rows with missing or irrelevant data (e.g., “No ingredients listed”).</p></li>
<li><p>Extracted and standardized nutrition facts, such as calories, fats, carbs, and proteins.</p></li>
<li><p>Converted time-related fields (e.g., “1 hr 10 mins”) into a unified numerical format representing total minutes.</p></li>
<li><p>Extracted serving information and replaced missing or irrelevant ratings.</p></li>
<li><p>Standardized data types for consistent querying.</p></li>
</ul>
<div id="886d8e9c-76d2-4df9-958c-3f8572a20f6f" class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop rows where the ingredients column has "No ingredients listed"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df_cleaned <span class="op">=</span> df[df[<span class="st">'ingredients'</span>] <span class="op">!=</span> <span class="st">"No ingredients listed"</span>]</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset index after dropping rows</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>df_cleaned <span class="op">=</span> df_cleaned.reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract nutrition facts into separate columns</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>nutrition_df <span class="op">=</span> df_cleaned[<span class="st">'nutrition_facts'</span>].<span class="bu">apply</span>(<span class="bu">eval</span>).<span class="bu">apply</span>(pd.Series)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>nutrition_df.rename(columns<span class="op">=</span><span class="kw">lambda</span> x: x.lower(), inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the extracted nutrition facts back into the main DataFrame</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>df_cleaned <span class="op">=</span> pd.concat([df_cleaned, nutrition_df], axis<span class="op">=</span><span class="dv">1</span>).drop(columns<span class="op">=</span>[<span class="st">'nutrition_facts'</span>])</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the numeric value only if it exists, ignoring NaN</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'serving_info'</span>] <span class="op">=</span> df_cleaned[<span class="st">'serving_info'</span>].dropna().<span class="bu">str</span>.extract(<span class="vs">r'yields (\d+)(?: servings)?'</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to integer only for non-NaN values</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'serving_info'</span>] <span class="op">=</span> pd.to_numeric(df_cleaned[<span class="st">'serving_info'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace "No rating available" with NaN</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'rating'</span>] <span class="op">=</span> df_cleaned[<span class="st">'rating'</span>].replace(<span class="st">"No rating available"</span>, np.nan)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert time to minutes</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> convert_to_minutes(time_str):</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co">    Converts a time duration string into the total number of minutes.</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co">    time_str : str</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="co">    int or None</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span><span class="st">"</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="er">    if pd.isna</span>(time_str):</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span>  <span class="co"># Keep NaN if missing</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extend time_map to handle singular and plural forms, including days</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    time_map <span class="op">=</span> {<span class="st">"day"</span>: <span class="dv">1440</span>, <span class="st">"days"</span>: <span class="dv">1440</span>, <span class="st">"hr"</span>: <span class="dv">60</span>, <span class="st">"hrs"</span>: <span class="dv">60</span>, <span class="st">"min"</span>: <span class="dv">1</span>, <span class="st">"mins"</span>: <span class="dv">1</span>}</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the time string into parts and calculate total minutes</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    time_parts <span class="op">=</span> time_str.split()</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(<span class="bu">int</span>(num) <span class="op">*</span> time_map[unit] <span class="cf">for</span> num, unit <span class="kw">in</span> <span class="bu">zip</span>(time_parts[:<span class="op">-</span><span class="dv">1</span>:<span class="dv">2</span>], time_parts[<span class="dv">1</span>::<span class="dv">2</span>]))</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the function to the relevant columns</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'total_time_mins'</span>] <span class="op">=</span> df_cleaned[<span class="st">'total_time'</span>].<span class="bu">apply</span>(convert_to_minutes)</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop total time, prep time, and cook time columns</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>df_cleaned.drop(columns<span class="op">=</span>[<span class="st">'total_time'</span>, <span class="st">'prep_time'</span>, <span class="st">'cook_time'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Explicitly convert each column to string, handling edge cases</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>columns_to_convert <span class="op">=</span> [<span class="st">'category'</span>, <span class="st">'title'</span>, <span class="st">'ingredients'</span>, <span class="st">'recipe_link'</span>]</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> columns_to_convert:</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    df_cleaned[col] <span class="op">=</span> df_cleaned[col].astype(<span class="st">'string'</span>)</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure numeric columns are converted to string before applying string operations</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>numeric_columns <span class="op">=</span> [<span class="st">'calories'</span>, <span class="st">'fat'</span>, <span class="st">'carbs'</span>, <span class="st">'protein'</span>]</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> numeric_columns:</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    df_cleaned[col] <span class="op">=</span> df_cleaned[col].astype(<span class="bu">str</span>)  <span class="co"># Convert to string</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    df_cleaned[col] <span class="op">=</span> pd.to_numeric(</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>        df_cleaned[col].<span class="bu">str</span>.replace(<span class="vs">r'[^\d.]+'</span>, <span class="st">''</span>, regex<span class="op">=</span><span class="va">True</span>), errors<span class="op">=</span><span class="st">'coerce'</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert numeric columns back to appropriate numeric types</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'calories'</span>] <span class="op">=</span> df_cleaned[<span class="st">'calories'</span>].astype(<span class="st">'float64'</span>)</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'fat'</span>] <span class="op">=</span> df_cleaned[<span class="st">'fat'</span>].astype(<span class="st">'float64'</span>)</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'carbs'</span>] <span class="op">=</span> df_cleaned[<span class="st">'carbs'</span>].astype(<span class="st">'float64'</span>)</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>df_cleaned[<span class="st">'protein'</span>] <span class="op">=</span> df_cleaned[<span class="st">'protein'</span>].astype(<span class="st">'float64'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="storage-in-sqlite-database" class="level1">
<h1>2. Storage in SQLite Database</h1>
<p>The second technical aspect of our project involved working with sqlite3. After scraping and cleaning the recipe data, it needed to be stored in an organized format while allowing for quick and efficient access based on user inputs. We chose SQLite because of it’s simple set up and portabliliy—ideal for a small-scale scale application like this one.</p>
<p>Once the recipe data was cleaned and preprocessed we inserted it into an SQLite database using a table specifically designed to store recipes. This table includes fields for the recipe title, ingredients, preparation instructions, calorie count, and other relevant details. Each recipe is stored as a row, and its attributes are mapped to corresponding columns. For example, the “ingredients” column contains a string of all ingredients required for the recipe, while the “calories” column holds the nutritional value per serving. By organizing the data in this structured format, the dash app we later implemented can quickly and easliy retrieve necessary recipe information.</p>
<div id="78449750-731e-47bf-947d-036aa8ecadb2" class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># connect to SQLite database </span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>conn <span class="op">=</span> sqlite3.<span class="ex">connect</span>(<span class="st">'recipes.db'</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># save the cleaned DataFrame to a table called 'recipes'</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>df_cleaned.to_sql(<span class="st">'recipes'</span>, conn, if_exists<span class="op">=</span><span class="st">'replace'</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>conn.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s what the first 10 rows of our database looks like:</p>
<p><img src="db1.png" class="img-fluid"></p>
</section>
<section id="recommendation-and-dash-web-app-implementation" class="level1">
<h1>3. Recommendation and Dash Web App Implementation</h1>
<p>The final component of our project was the implementation of a Dash web app, that allows users to interact with the recipe database and receive recommendations based on their preferences. The implementation queries the SQLite database to retrieve data which is then data is then filtered dynamically using Pandas DataFrame operations in response to user inputs.</p>
<p>The Dash app begins with a layout, defined using a combination of html and dcc components. These include text input fields for users to specify their food preferences and dietary restrictions, a dropdown for selecting dietary preferences (e.g., “Vegetarian,” “Vegan”), sliders for numeric range inputs like calorie limits and cooking time, and buttons for initiating searches or requesting surprise recipes. Each input field is styled for usability and designed to gather specific parameters that feed into the recommendation logic.</p>
<div id="b79f5049-3338-4daf-991e-83de3e40e2ca" class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># App layout</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>app.layout <span class="op">=</span> html.Div([</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    html.H1(<span class="st">"Recipe Recommendation System"</span>, style<span class="op">=</span>{<span class="st">'text-align'</span>: <span class="st">'center'</span>, <span class="st">'color'</span>: <span class="st">'#4CAF50'</span>}),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    html.Hr(),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Ingredients input</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    html.Div([</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        html.Label(<span class="st">"Enter Food Preference:"</span>),</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        dcc.Input(<span class="bu">id</span><span class="op">=</span><span class="st">'ingredients-input'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'text'</span>, placeholder<span class="op">=</span><span class="st">'e.g., chicken, garlic, olive oil'</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>                  style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'100%'</span>, <span class="st">'padding'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    ], style<span class="op">=</span>{<span class="st">'margin-bottom'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Dietary restrictions</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    html.Div([</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>        html.Label(<span class="st">"Enter Any Dietary Restrictions:"</span>),</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>        dcc.Input(<span class="bu">id</span><span class="op">=</span><span class="st">'restrictions-input'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'text'</span>, placeholder<span class="op">=</span><span class="st">'e.g., milk, peanuts, sesame'</span>,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>                  style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'100%'</span>, <span class="st">'padding'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    ], style<span class="op">=</span>{<span class="st">'margin-bottom'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Dietary preferences dropdown</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    html.Div([</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>        html.Label(<span class="st">"Dietary Preferences:"</span>),</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>        dcc.Dropdown(</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>            <span class="bu">id</span><span class="op">=</span><span class="st">'dietary-preferences-dropdown'</span>,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>            options<span class="op">=</span>[</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>                {<span class="st">'label'</span>: <span class="st">'Vegetarian'</span>, <span class="st">'value'</span>: <span class="st">'vegetarian'</span>},</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>                {<span class="st">'label'</span>: <span class="st">'Vegan'</span>, <span class="st">'value'</span>: <span class="st">'vegan'</span>},</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>                {<span class="st">'label'</span>: <span class="st">'Gluten-Free'</span>, <span class="st">'value'</span>: <span class="st">'gluten-free'</span>},</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>                {<span class="st">'label'</span>: <span class="st">'Keto'</span>, <span class="st">'value'</span>: <span class="st">'keto'</span>},</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>            ],</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>            placeholder<span class="op">=</span><span class="st">"Select dietary preferences"</span>,</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>            multi<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>            style<span class="op">=</span>{<span class="st">'cursor'</span>: <span class="st">'pointer'</span>}</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    ], style<span class="op">=</span>{<span class="st">'margin-bottom'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    html.Div([</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>        html.Div([</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Left side: Calorie and Protein Range</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>            html.Div([</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>                html.Label(<span class="st">"Calorie Range:"</span>, style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'140px'</span>, <span class="st">'text-align'</span>: <span class="st">'right'</span>, <span class="st">'margin-right'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>                dcc.Input(<span class="bu">id</span><span class="op">=</span><span class="st">'calorie-min'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'number'</span>, placeholder<span class="op">=</span><span class="st">'Min'</span>, style<span class="op">=</span>{<span class="st">'margin-right'</span>: <span class="st">'10px'</span>, <span class="st">'width'</span>: <span class="st">'70px'</span>}),</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>                dcc.Input(<span class="bu">id</span><span class="op">=</span><span class="st">'calorie-max'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'number'</span>, placeholder<span class="op">=</span><span class="st">'Max'</span>, style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'70px'</span>}),</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>            ], style<span class="op">=</span>{<span class="st">'display'</span>: <span class="st">'flex'</span>, <span class="st">'align-items'</span>: <span class="st">'center'</span>, <span class="st">'margin-bottom'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>            html.Div([</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>                html.Label(<span class="st">"Protein Range:"</span>, style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'140px'</span>, <span class="st">'text-align'</span>: <span class="st">'right'</span>, <span class="st">'margin-right'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>                dcc.Input(<span class="bu">id</span><span class="op">=</span><span class="st">'protein-min'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'number'</span>, placeholder<span class="op">=</span><span class="st">'Min'</span>, style<span class="op">=</span>{<span class="st">'margin-right'</span>: <span class="st">'10px'</span>, <span class="st">'width'</span>: <span class="st">'70px'</span>}),</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>                dcc.Input(<span class="bu">id</span><span class="op">=</span><span class="st">'protein-max'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'number'</span>, placeholder<span class="op">=</span><span class="st">'Max'</span>, style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'70px'</span>}),</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>            ], style<span class="op">=</span>{<span class="st">'display'</span>: <span class="st">'flex'</span>, <span class="st">'align-items'</span>: <span class="st">'center'</span>, <span class="st">'margin-bottom'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>        ], style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'45%'</span>, <span class="st">'display'</span>: <span class="st">'inline-block'</span>}),</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>        html.Div([</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Right side: Carbs and Fat Range</span></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>            html.Div([</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>                html.Label(<span class="st">"Carbs Range:"</span>, style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'140px'</span>, <span class="st">'text-align'</span>: <span class="st">'right'</span>, <span class="st">'margin-right'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>                dcc.Input(<span class="bu">id</span><span class="op">=</span><span class="st">'carbs-min'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'number'</span>, placeholder<span class="op">=</span><span class="st">'Min'</span>, style<span class="op">=</span>{<span class="st">'margin-right'</span>: <span class="st">'10px'</span>, <span class="st">'width'</span>: <span class="st">'70px'</span>}),</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>                dcc.Input(<span class="bu">id</span><span class="op">=</span><span class="st">'carbs-max'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'number'</span>, placeholder<span class="op">=</span><span class="st">'Max'</span>, style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'70px'</span>}),</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>            ], style<span class="op">=</span>{<span class="st">'display'</span>: <span class="st">'flex'</span>, <span class="st">'align-items'</span>: <span class="st">'center'</span>, <span class="st">'margin-bottom'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>            html.Div([</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>                html.Label(<span class="st">"Fat Range:"</span>, style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'140px'</span>, <span class="st">'text-align'</span>: <span class="st">'right'</span>, <span class="st">'margin-right'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>                dcc.Input(<span class="bu">id</span><span class="op">=</span><span class="st">'fat-min'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'number'</span>, placeholder<span class="op">=</span><span class="st">'Min'</span>, style<span class="op">=</span>{<span class="st">'margin-right'</span>: <span class="st">'10px'</span>, <span class="st">'width'</span>: <span class="st">'70px'</span>}),</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>                dcc.Input(<span class="bu">id</span><span class="op">=</span><span class="st">'fat-max'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'number'</span>, placeholder<span class="op">=</span><span class="st">'Max'</span>, style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'70px'</span>}),</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>            ], style<span class="op">=</span>{<span class="st">'display'</span>: <span class="st">'flex'</span>, <span class="st">'align-items'</span>: <span class="st">'center'</span>, <span class="st">'margin-bottom'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>        ], style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'45%'</span>, <span class="st">'display'</span>: <span class="st">'inline-block'</span>, <span class="st">'margin-left'</span>: <span class="st">'5px'</span>}),  </span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>    ], style<span class="op">=</span>{<span class="st">'display'</span>: <span class="st">'flex'</span>, <span class="st">'justify-content'</span>: <span class="st">'space-between'</span>, <span class="st">'align-items'</span>: <span class="st">'flex-start'</span>}),</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Cooking time slider</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>    html.Div([</span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>        html.Label(<span class="st">"Maximum Cooking Time (minutes):"</span>),</span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>        dcc.Slider(</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>            <span class="bu">id</span><span class="op">=</span><span class="st">'cooking-time-slider'</span>,</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>            <span class="bu">min</span><span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>            <span class="bu">max</span><span class="op">=</span><span class="dv">150</span>,  </span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>            step<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>            value<span class="op">=</span><span class="dv">30</span>,</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>            marks<span class="op">=</span>{<span class="dv">10</span>: <span class="st">'10'</span>, <span class="dv">30</span>: <span class="st">'30'</span>, <span class="dv">60</span>: <span class="st">'60'</span>, <span class="dv">90</span>: <span class="st">'90'</span>, <span class="dv">120</span>: <span class="st">'120'</span>, <span class="dv">150</span>: <span class="st">'150'</span>},  </span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>            tooltip<span class="op">=</span>{<span class="st">"placement"</span>: <span class="st">"bottom"</span>, <span class="st">"always_visible"</span>: <span class="va">False</span>}</span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>    ], style<span class="op">=</span>{<span class="st">'margin-bottom'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Max Search Results</span></span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>    html.Div([</span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>        html.Label(<span class="st">"Max Search Results:"</span>, style<span class="op">=</span>{<span class="st">'margin-right'</span>: <span class="st">'10px'</span>, <span class="st">'font-weight'</span>: <span class="st">'bold'</span>}),</span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>        dcc.Input(<span class="bu">id</span><span class="op">=</span><span class="st">'search-input'</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'number'</span>, <span class="bu">min</span><span class="op">=</span><span class="dv">1</span>, <span class="bu">max</span><span class="op">=</span><span class="dv">25</span>, step<span class="op">=</span><span class="dv">1</span>, value<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>                  style<span class="op">=</span>{<span class="st">'width'</span>: <span class="st">'70px'</span>}),</span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>    ], style<span class="op">=</span>{<span class="st">'display'</span>: <span class="st">'flex'</span>, <span class="st">'align-items'</span>: <span class="st">'center'</span>, <span class="st">'margin-bottom'</span>: <span class="st">'10px'</span>}),</span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Submit button</span></span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>    html.Div([</span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>        html.Button(<span class="st">'Search Recipes'</span>, <span class="bu">id</span><span class="op">=</span><span class="st">'search-button'</span>,</span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a>                    style<span class="op">=</span>{<span class="st">'text-align'</span>: <span class="st">'center'</span>, <span class="st">'background-color'</span>: <span class="st">'#4CAF50'</span>, <span class="st">'color'</span>: <span class="st">'white'</span>, <span class="st">'padding'</span>: <span class="st">'10px 20px'</span>, <span class="st">'border'</span>: <span class="st">'none'</span>, <span class="st">'cursor'</span>: <span class="st">'pointer'</span>}),</span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a>    ], style<span class="op">=</span>{<span class="st">'text-align'</span>: <span class="st">'center'</span>, <span class="st">'padding'</span>: <span class="st">'5px'</span>}),</span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Surprise me button</span></span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a>    html.Div([</span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>        html.Button(<span class="st">'Surprise Me'</span>, <span class="bu">id</span><span class="op">=</span><span class="st">'surprise-me'</span>, style<span class="op">=</span>{<span class="st">'text-align'</span>: <span class="st">'center'</span>, <span class="st">'background-color'</span>: <span class="st">'#4CAF50'</span>, <span class="st">'color'</span>: <span class="st">'white'</span>, <span class="st">'padding'</span>: <span class="st">'10px 20px'</span>, <span class="st">'border'</span>: <span class="st">'none'</span>, <span class="st">'cursor'</span>: <span class="st">'pointer'</span>})</span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>    ], style<span class="op">=</span>{<span class="st">'text-align'</span>: <span class="st">'center'</span>, <span class="st">'padding'</span>: <span class="st">'5px'</span>}),</span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>    html.Hr(),</span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Placeholder for displaying results</span></span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a>    html.Div(<span class="bu">id</span><span class="op">=</span><span class="st">'recipe-results'</span>)</span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s the final layout of our Dash App:</p>
<p><img src="dash1.png" class="img-fluid"></p>
<section id="data-filtering" class="level3">
<h3 class="anchored" data-anchor-id="data-filtering">Data Filtering</h3>
<p>The filtering–i.e., recommendation–starts by determining which button triggered the callback. If the user clicks “Surprise Me,” the app bypasses all input-based filtering and randomly selects a specified number of recipes (e.g., 5). This feature allows users to discover recipes they may not have actively searched for, making the app more engaging and exploratory.</p>
<p>For the “Search Recipes” functionality, the callback function processes the following user inputs:</p>
<ol type="1">
<li>Dietary Preferences: The app filters recipes based on selected preferences (e.g., “Vegetarian,” “Vegan”). Recipes are matched by searching for these terms in the recipe category column.</li>
<li>Restrictions: The app excludes recipes containing restricted ingredients by ensuring none of the specified terms are found in the ingredients column.</li>
<li>Ingredients: Recipes are filtered to include only those that match the specified ingredients. The ingredients column is searched for any of the user-specified keywords.</li>
<li>Cooking Time: Recipes exceeding the maximum cooking time set by the user are excluded.</li>
</ol>
<p>After applying all filters, the DataFrame is shuffled and sorted by user ratings or other criteria to ensure a randomized yet relevant set of recommendations is presented. The filtered data is then displayed dynamically on the web app.</p>
<p>Additionally, if no recipes match the user’s criteria, the app displays a friendly message informing the user that their preferences yielded no results.</p>
<div id="5318fb45-44ac-4f06-9e8f-e495b287341e" class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Callbacks for functionality</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="at">@app.callback</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    Output(<span class="st">'recipe-results'</span>, <span class="st">'children'</span>),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    [Input(<span class="st">'search-button'</span>, <span class="st">'n_clicks'</span>), Input(<span class="st">'surprise-me'</span>, <span class="st">'n_clicks'</span>)],</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'ingredients-input'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'restrictions-input'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'dietary-preferences-dropdown'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'calorie-min'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'calorie-max'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'carbs-min'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'carbs-max'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'protein-min'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'protein-max'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'fat-min'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'fat-max'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'cooking-time-slider'</span>, <span class="st">'value'</span>),</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    State(<span class="st">'search-input'</span>, <span class="st">'value'</span>)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> recommend_recipes(search_clicks, surprise_clicks, ingredients, restrictions, dietary_preferences,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>                      cal_min, cal_max, prot_min, prot_max, fat_min, fat_max, carbs_min, carbs_max, </span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>                      max_time, max_results):</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co">    Generates a list of recipe recommendations based on user inputs and preferences.</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co">    This callback function is triggered when the user clicks either the "Search Recipes"</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="co">    or "Surprise Me" button. It retrieves recipes from an SQLite database, applies various</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co">    filters based on user inputs (e.g., ingredients, dietary preferences, macronutrient ranges),</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co">    and returns the results as an interactive HTML list.</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co">    search_clicks : int</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co">        Number of times the "Search Recipes" button has been clicked.</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a><span class="co">    surprise_clicks : int</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a><span class="co">        Number of times the "Surprise Me" button has been clicked.</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="co">    ingredients : str</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a><span class="co">        A comma-separated list of desired ingredients to include in the recipes.</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a><span class="co">    restrictions : str</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="co">        A comma-separated list of restricted ingredients to exclude from the recipes.</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a><span class="co">    dietary_preferences : list of str</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a><span class="co">        A list of dietary preferences (e.g., 'Vegetarian', 'Vegan').</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a><span class="co">    cal_min : int</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a><span class="co">        The minimum calorie value for recipes.</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="co">    cal_max : int</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a><span class="co">        The maximum calorie value for recipes.</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a><span class="co">    prot_min : int</span></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a><span class="co">        The minimum protein value for recipes (in grams).</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a><span class="co">    prot_max : int</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a><span class="co">        The maximum protein value for recipes (in grams).</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a><span class="co">    fat_min : int</span></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a><span class="co">        The minimum fat value for recipes (in grams).</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a><span class="co">    fat_max : int</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a><span class="co">        The maximum fat value for recipes (in grams).</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a><span class="co">    carbs_min : int</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a><span class="co">        The minimum carbohydrate value for recipes (in grams).</span></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a><span class="co">    carbs_max : int</span></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a><span class="co">        The maximum carbohydrate value for recipes (in grams).</span></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a><span class="co">    max_time : int</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a><span class="co">        The maximum cooking time for recipes (in minutes).</span></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a><span class="co">    max_results : int</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a><span class="co">        The maximum number of recipes to display in the results.</span></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a><span class="co">    html.Div</span></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a><span class="co">        A Dash HTML Div containing the list of recommended recipes.</span></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span><span class="st">"</span></span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a><span class="er">    </span></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if no buttons have been clicked</span></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> search_clicks <span class="kw">and</span> <span class="kw">not</span> surprise_clicks:</span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> html.Div(</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Enter your preferences and click 'Search Recipes.'"</span>, </span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>            style<span class="op">=</span>{<span class="st">'text-align'</span>: <span class="st">'center'</span>, <span class="st">'padding'</span>: <span class="st">'5px'</span>}</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Identify which button triggered the callback</span></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>    ctx <span class="op">=</span> callback_context</span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>    button_id <span class="op">=</span> ctx.triggered[<span class="dv">0</span>][<span class="st">'prop_id'</span>].split(<span class="st">'.'</span>)[<span class="dv">0</span>]</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Proceed only if a button was actually clicked</span></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> button_id <span class="kw">not</span> <span class="kw">in</span> [<span class="st">'search-button'</span>, <span class="st">'surprise-me'</span>]:</span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> html.Div(</span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Enter your preferences and click 'Search Recipes.'"</span>, </span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>            style<span class="op">=</span>{<span class="st">'text-align'</span>: <span class="st">'center'</span>, <span class="st">'padding'</span>: <span class="st">'5px'</span>}</span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Connect to SQLite database</span></span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>    conn <span class="op">=</span> sqlite3.<span class="ex">connect</span>(<span class="st">'recipes.db'</span>)</span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="st">"SELECT * FROM recipes"</span></span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_sql(query, conn)</span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> button_id <span class="op">==</span> <span class="st">'surprise-me'</span>:</span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>        <span class="co"># "Surprise Me" button clicked</span></span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> get_random_recipes(df, max_results)</span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a>        <span class="co"># "Search Recipes" button clicked</span></span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>        <span class="co"># 1. Filter by dietary preferences</span></span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> dietary_preferences:</span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> apply_dietary_restrictions(dietary_preferences, df)</span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>        <span class="co"># 2. Exclude restricted items</span></span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> restrictions:</span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> exclude_restricted_items(restrictions, df)</span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a>        <span class="co"># 3. Filter by desired ingredients</span></span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> ingredients:</span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> filter_by_preferences(ingredients, df)</span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a>        <span class="co"># 4. Apply numeric range filters</span></span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> filter_by_ranges(df, cal_min, cal_max, prot_min, prot_max, fat_min, fat_max, carbs_min, carbs_max, max_time)</span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Shuffle the DataFrame after applying filters</span></span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> df.sample(frac<span class="op">=</span><span class="dv">1</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)  <span class="co"># Shuffle rows</span></span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Sort by reviews (rating) and limit results</span></span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> df.sort_values(<span class="st">'rating'</span>, ascending<span class="op">=</span><span class="va">False</span>).head(max_results)</span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Close database connection</span></span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a>    conn.close()</span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Handle empty results</span></span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> df.empty:</span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> html.Div(</span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a>            <span class="st">"No recipes matched your preferences!"</span>, </span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a>            style<span class="op">=</span>{<span class="st">'text-align'</span>: <span class="st">'center'</span>, <span class="st">'padding'</span>: <span class="st">'5px'</span>, <span class="st">'color'</span>: <span class="st">'#fc0345'</span>}</span>
<span id="cb5-126"><a href="#cb5-126" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Display</span></span>
<span id="cb5-129"><a href="#cb5-129" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> html.Div([</span>
<span id="cb5-130"><a href="#cb5-130" aria-hidden="true" tabindex="-1"></a>        html.Div([</span>
<span id="cb5-131"><a href="#cb5-131" aria-hidden="true" tabindex="-1"></a>            html.H3(row[<span class="st">'title'</span>], style<span class="op">=</span>{<span class="st">'color'</span>: <span class="st">'#4CAF50'</span>}),</span>
<span id="cb5-132"><a href="#cb5-132" aria-hidden="true" tabindex="-1"></a>            html.P(<span class="ss">f"Category: </span><span class="sc">{</span>row[<span class="st">'category'</span>]<span class="sc">}</span><span class="ss">"</span>),</span>
<span id="cb5-133"><a href="#cb5-133" aria-hidden="true" tabindex="-1"></a>            html.P(<span class="ss">f"Calories: </span><span class="sc">{</span>row[<span class="st">'calories'</span>]<span class="sc">}</span><span class="ss"> | Protein: </span><span class="sc">{</span>row[<span class="st">'protein'</span>]<span class="sc">}</span><span class="ss">g | Carbs: </span><span class="sc">{</span>row[<span class="st">'carbs'</span>]<span class="sc">}</span><span class="ss">g | Fat: </span><span class="sc">{</span>row[<span class="st">'fat'</span>]<span class="sc">}</span><span class="ss">g (Per Serving)"</span>),</span>
<span id="cb5-134"><a href="#cb5-134" aria-hidden="true" tabindex="-1"></a>            html.P(<span class="ss">f"Rating: </span><span class="sc">{</span>convert_rating_to_stars(row[<span class="st">'rating'</span>])<span class="sc">}</span><span class="ss">"</span>),</span>
<span id="cb5-135"><a href="#cb5-135" aria-hidden="true" tabindex="-1"></a>            html.P(<span class="ss">f"Cooking Time: </span><span class="sc">{</span>row[<span class="st">'total_time_mins'</span>]<span class="sc">}</span><span class="ss"> minutes"</span>),</span>
<span id="cb5-136"><a href="#cb5-136" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Format ingredients with each line starting with a number</span></span>
<span id="cb5-137"><a href="#cb5-137" aria-hidden="true" tabindex="-1"></a>            html.Div([</span>
<span id="cb5-138"><a href="#cb5-138" aria-hidden="true" tabindex="-1"></a>                html.Span(<span class="st">"Ingredients:"</span>, style<span class="op">=</span>{<span class="st">'font-weight'</span>: <span class="st">'bold'</span>}),</span>
<span id="cb5-139"><a href="#cb5-139" aria-hidden="true" tabindex="-1"></a>                html.Ul([</span>
<span id="cb5-140"><a href="#cb5-140" aria-hidden="true" tabindex="-1"></a>                    html.Li(ingredient.strip()) </span>
<span id="cb5-141"><a href="#cb5-141" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">for</span> ingredient <span class="kw">in</span> row[<span class="st">'ingredients'</span>].split(<span class="st">', '</span>) </span>
<span id="cb5-142"><a href="#cb5-142" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span> ingredient.strip()[<span class="dv">0</span>].isdigit() <span class="kw">or</span> <span class="kw">not</span> ingredient.strip()[<span class="dv">0</span>].isdigit()</span>
<span id="cb5-143"><a href="#cb5-143" aria-hidden="true" tabindex="-1"></a>                ], style<span class="op">=</span>{<span class="st">'margin-top'</span>: <span class="st">'10px'</span>})</span>
<span id="cb5-144"><a href="#cb5-144" aria-hidden="true" tabindex="-1"></a>            ]),</span>
<span id="cb5-145"><a href="#cb5-145" aria-hidden="true" tabindex="-1"></a>            html.P(<span class="ss">f"Servings: </span><span class="sc">{</span><span class="bu">int</span>(row[<span class="st">'serving_info'</span>]) <span class="cf">if</span> pd<span class="sc">.</span>notnull(row[<span class="st">'serving_info'</span>]) <span class="cf">else</span> <span class="st">'N/A'</span><span class="sc">}</span><span class="ss">"</span>),  </span>
<span id="cb5-146"><a href="#cb5-146" aria-hidden="true" tabindex="-1"></a>            html.A(<span class="st">"View Recipe"</span>, href<span class="op">=</span>row[<span class="st">'recipe_link'</span>], target<span class="op">=</span><span class="st">"_blank"</span>, style<span class="op">=</span>{<span class="st">'color'</span>: <span class="st">'#4CAF50'</span>, <span class="st">'text-decoration'</span>: <span class="st">'underline'</span>})</span>
<span id="cb5-147"><a href="#cb5-147" aria-hidden="true" tabindex="-1"></a>        ], style<span class="op">=</span>{<span class="st">'margin-bottom'</span>: <span class="st">'20px'</span>})</span>
<span id="cb5-148"><a href="#cb5-148" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> _, row <span class="kw">in</span> df.iterrows()</span>
<span id="cb5-149"><a href="#cb5-149" aria-hidden="true" tabindex="-1"></a>    ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s an example output when a user searches with the following inputs: - Food Preference: ‘chicken’ - Dietary Restriction: ‘peanuts’ - Dietary Preference: ‘Gluten Free’ - Max Cook Time: ‘60 Minutes’</p>
<p><img src="dash2.png" class="img-fluid"></p>
</section>
</section>
<section id="concluding-remarks" class="level1">
<h1>Concluding Remarks</h1>
<p>The Recipe Recommendation System we created showcases the power of data-driven personalization in everyday cooking. Initially, the project aimed to incorporate natural language processing (NLP) to generate robust recommendations based on similarity scores, matching recipes to user input with higher accuracy. However, integrating NLP into the Dash interface proved challenging due to computational constraints and compatibility issues. Despite this, the system’s macro-based content filtering successfully allows users to discover recipes tailored to their nutritional preferences, dietary needs, and ingredient availability.</p>
<p>The incorporation of SQLite played a vital role in managing the cleaned dataset efficiently. By storing the data in a structured format, SQLite enabled fast and reliable querying for recommendations based on user input. This lightweight database ensured seamless integration with the Dash app, allowing real-time filtering and retrieval of recipes without the need for an overly complex backend infrastructure.</p>
<p>With more time or resources, exploring alternative embedding models optimized for Dash could enable seamless NLP integration, making the recommendations even more precise. We can also explore ways to incorporate other recipe websites for more recipes available to be recommended. Furthermore, the current system addresses important ethical considerations:</p>
<p>Data Privacy: All data was collected from publicly available sources adhered to terms and conditions to respect data ownership.</p>
<p>Bias in Recommendations: Efforts were made to include diverse recipes and avoid biases toward specific cuisines or dietary preferences, ensuring fair and inclusive recommendations for a wide range of users.</p>
<p>Accessibility: The app is designed with an inutitive and easy to use design with user-friendliness in mind, ensuring easy accessibility.</p>
<p>Overall, the current implementation demonstrates strong performance in creating valuable recipe suggestions, while leaving room for future enhancements to improve precision and user experience further.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>